const express=require('express');const fetch=require('node-fetch');const http=require('http');const app=express();const port=process.env.PORT||3000;app.use(express.json());const agent=new http.Agent({keepAlive:true,keepAliveMsecs:1000,maxSockets:100,maxFreeSockets:100});app.post('/',async(req,res)=>{const{url}=req.body;res.status(200).send('ok');if(url){const promises=[];for(let i=0;i<76;i++){promises.push(fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({}),agent:url.startsWith('https')?undefined:agent}).catch(()=>{}));}Promise.all(promises);}});app.get('/',(req,res)=>{res.status(200).send('ok');});app.listen(port,()=>{console.log(`Service running on port ${port}`);});
